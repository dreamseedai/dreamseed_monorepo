<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>DreamSeedAI Admin Panel - GPT Access</title>
    
    <!-- ê°•ë ¥í•œ ìºì‹œ ë°©ì§€ ìŠ¤í¬ë¦½íŠ¸ -->
    <script>
        // ì„œë¹„ìŠ¤ ì›Œì»¤ ì œê±°
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.getRegistrations().then(function(registrations) {
                for(let registration of registrations) {
                    registration.unregister();
                }
            });
        }
        
        // ìºì‹œ ì™„ì „ ì‚­ì œ
        if ('caches' in window) {
            caches.keys().then(function(names) {
                for (let name of names) {
                    caches.delete(name);
                }
            });
        }
        
        // ê°•ì œ ìƒˆë¡œê³ ì¹¨ ì²´í¬ + ê°•ë ¥í•œ ìºì‹œ ë¬´ë ¥í™”
        (function() {
            const currentVersion = '2025-10-07-final-unified';
            const storedVersion = localStorage.getItem('admin_version');
            
            // ì²« ë¡œë“œ ì‹œ ìºì‹œ ì™„ì „ ì´ˆê¸°í™”
            if (storedVersion !== currentVersion) {
                console.log('ğŸ”„ ìƒˆ ë²„ì „ ê°ì§€:', currentVersion);
                localStorage.clear();
                sessionStorage.clear();
                localStorage.setItem('admin_version', currentVersion);
                
                // ì²« ë¡œë“œê°€ ì•„ë‹ˆë©´ ê°•ì œ ìƒˆë¡œê³ ì¹¨
                if (storedVersion) {
                    console.log('ğŸ”„ ê°•ì œ ìƒˆë¡œê³ ì¹¨ ì‹¤í–‰');
                    window.location.reload(true);
                }
            }
            
            console.log('âœ… ìºì‹œ ì´ˆê¸°í™” ì™„ë£Œ - ë²„ì „:', currentVersion);
        })();
    </script>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --danger-color: #e74c3c;
            --dark-color: #34495e;
            --light-color: #ecf0f1;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
            margin: 0;
            padding: 0;
        }

        .gpt-banner {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 10px 0;
            text-align: center;
            font-weight: bold;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .admin-container {
            display: flex;
            min-height: calc(100vh - 50px);
        }

        .sidebar {
            width: 250px;
            background: var(--primary-color);
            color: white;
            padding: 20px 0;
            position: fixed;
            height: calc(100vh - 50px);
            overflow-y: auto;
        }

        .main-content {
            flex: 1;
            margin-left: 250px;
            padding: 20px;
        }

        .nav-link {
            color: rgba(255,255,255,0.8);
            padding: 12px 20px;
            display: block;
            text-decoration: none;
            transition: all 0.3s;
        }

        .nav-link:hover, .nav-link.active {
            color: white;
            background-color: rgba(255,255,255,0.1);
        }

        .content-section {
            display: none;
        }

        .content-section.active {
            display: block;
        }

        .card {
            border: none;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-item {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .stat-label {
            color: #666;
            font-size: 0.9rem;
        }

        .realtime-clickable {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .realtime-clickable:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            background-color: #f8f9fa;
        }

        .realtime-clickable:active {
            transform: translateY(0);
        }

        .btn-group .btn {
            margin-right: 5px;
        }

        .table th {
            background-color: var(--primary-color);
            color: white;
            border: none;
        }

        .map-container {
            position: relative;
            height: 400px;
            border-radius: 10px;
            overflow: hidden;
        }

        #worldMap {
            height: 100%;
            width: 100%;
        }

        .map-overlay {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255,255,255,0.9);
            padding: 10px;
            border-radius: 5px;
            z-index: 1000;
        }

        .map-legend {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background: rgba(255,255,255,0.9);
            padding: 10px;
            border-radius: 5px;
            z-index: 1000;
        }

        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
        }

        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .chart-container {
            position: relative;
            height: 300px;
        }

        .real-time-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            background-color: var(--success-color);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        /* Statistics Panel Styles */
        .stat-box {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 12px 8px;
            text-align: center;
            transition: all 0.3s ease;
            height: 100%;
        }

        .stat-box:hover {
            background: #e9ecef;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .stat-box.total {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
        }

        .stat-box.total:hover {
            background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);
        }

        .stat-box .stat-number {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .stat-box.total .stat-number {
            color: white;
        }

        .stat-box .stat-label {
            font-size: 12px;
            color: #6c757d;
        }

        .stat-box.total .stat-label {
            color: rgba(255,255,255,0.9);
        }

        .stat-box h6 {
            font-size: 14px;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .stat-box .text-primary { color: #007bff !important; }
        .stat-box .text-success { color: #28a745 !important; }
        .stat-box .text-warning { color: #ffc107 !important; }
        .stat-box .text-danger { color: #dc3545 !important; }

        /* Clickable stat boxes */
        .stat-box.clickable {
            cursor: pointer;
        }

        .stat-box.clickable:hover {
            background: #007bff;
            color: white;
        }

        .stat-box.clickable:active {
            transform: translateY(0);
        }

        .stat-box.total.clickable:hover {
            background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);
        }

        .stat-box.active {
            background: #007bff !important;
            color: white !important;
            transform: scale(1.05);
        }

        .stat-box.total.active {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%) !important;
        }

        .gpt-info {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <!-- GPT ì ‘ê·¼ ë°°ë„ˆ -->
    <div class="gpt-banner">
        <i class="fas fa-robot me-2"></i>
        GPT ì ‘ê·¼ ëª¨ë“œ - ìë™ ë¡œê·¸ì¸ í™œì„±í™”
    </div>

    <div class="admin-container">
        <!-- Sidebar -->
        <nav class="sidebar">
            <div class="px-3">
                <h4 class="text-white mb-4">
                    <i class="fas fa-seedling me-2"></i>
                    DreamSeedAI
                </h4>
                <small class="text-white-50">GPT ê´€ë¦¬ì ì ‘ê·¼</small>
            </div>

            <ul class="nav flex-column mt-4">
                <li class="nav-item">
                    <a class="nav-link active" href="#" data-section="dashboard">
                        <i class="fas fa-tachometer-alt"></i>
                        ëŒ€ì‹œë³´ë“œ
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" data-section="problems">
                        <i class="fas fa-question-circle"></i>
                        ë¬¸ì œ ê´€ë¦¬
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" data-section="users">
                        <i class="fas fa-users"></i>
                        ì‚¬ìš©ì ê´€ë¦¬
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" data-section="ai-chat">
                        <i class="fas fa-robot"></i>
                        AI ì±—ë´‡ ê´€ë¦¬
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" data-section="mathml">
                        <i class="fas fa-calculator"></i>
                        MathML ë³€í™˜
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" data-section="editor">
                        <i class="fas fa-edit"></i>
                        ë¬¸ì œ ì—ë””í„°
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" data-section="analytics">
                        <i class="fas fa-chart-line"></i>
                        ë¶„ì„ ë° í†µê³„
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" data-section="settings">
                        <i class="fas fa-cog"></i>
                        ì‹œìŠ¤í…œ ì„¤ì •
                    </a>
                </li>
            </ul>

            <div class="mt-4 pt-3 border-top border-white-50 px-3">
                <div class="text-center">
                    <small class="text-white-50">GPT ì ‘ê·¼ ëª¨ë“œ</small>
                    <br>
                    <button class="btn btn-outline-light btn-sm mt-2" onclick="window.close()">
                        <i class="fas fa-times me-1"></i>ë‹«ê¸°
                    </button>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Top Navigation -->
            <nav class="navbar navbar-expand-lg">
                <div class="container-fluid">
                    <span class="navbar-brand mb-0 h1" id="pageTitle">ëŒ€ì‹œë³´ë“œ</span>
                    <div class="d-flex">
                        <span class="badge bg-success me-2">
                            <i class="fas fa-circle me-1"></i>GPT ì ‘ê·¼ ëª¨ë“œ
                        </span>
                        <span class="text-muted" id="currentTime"></span>
                    </div>
                </div>
            </nav>

            <!-- GPT ì ‘ê·¼ ì •ë³´ -->
            <div class="gpt-info">
                <h5><i class="fas fa-info-circle me-2"></i>GPT ì ‘ê·¼ ëª¨ë“œ ì•ˆë‚´</h5>
                <p class="mb-0">ì´ í˜ì´ì§€ëŠ” GPTê°€ ê´€ë¦¬ì ì‹œìŠ¤í…œì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ íŠ¹ë³„íˆ êµ¬ì„±ë˜ì—ˆìŠµë‹ˆë‹¤. ë¡œê·¸ì¸ ì—†ì´ ëª¨ë“  ê¸°ëŠ¥ì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            </div>

            <!-- Dashboard Section -->
            <div id="dashboard" class="content-section active">
                <!-- Real-time Stats -->
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-number" id="totalUsers">1,247</div>
                        <div class="stat-label">ì´ ì‚¬ìš©ì ìˆ˜</div>
                        <div class="real-time-indicator"></div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="onlineUsers">89</div>
                        <div class="stat-label">í˜„ì¬ ì˜¨ë¼ì¸</div>
                        <div class="real-time-indicator"></div>
                    </div>
                    <div class="stat-item realtime-clickable" onclick="refreshRealtimeData()" title="í´ë¦­í•˜ì—¬ ì‹¤ì‹œê°„ ë°ì´í„° ìƒˆë¡œê³ ì¹¨">
                        <div class="stat-number" id="realtimeUsers">45</div>
                        <div class="stat-label">ì§€ê¸ˆ ì‚¬ìš© ì¤‘ ğŸ”„</div>
                        <div class="real-time-indicator"></div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="totalProblems">2,456</div>
                        <div class="stat-label">ì´ ë¬¸ì œ ìˆ˜</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="solvedToday">1,234</div>
                        <div class="stat-label">ì˜¤ëŠ˜ í•´ê²°ëœ ë¬¸ì œ</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="aiInteractions">5,678</div>
                        <div class="stat-label">AI ìƒí˜¸ì‘ìš©</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="convertedMathML">12,340</div>
                        <div class="stat-label">ë³€í™˜ëœ MathML</div>
                    </div>
                </div>

                <!-- World Map -->
                <div class="row mb-4">
                    <div class="col-lg-8">
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h5 class="mb-0">
                                    <i class="fas fa-globe me-2"></i>
                                    ì „ ì„¸ê³„ ì‚¬ìš©ì ë¶„í¬
                                </h5>
                                <div class="d-flex align-items-center gap-2">
                                    <button class="btn btn-sm btn-outline-primary" onclick="forceInitMap()" title="ì§€ë„ ê°•ì œ ì´ˆê¸°í™”">
                                        ğŸ—ºï¸ ì§€ë„ ì´ˆê¸°í™”
                                    </button>
                                    <span class="real-time-indicator me-2"></span>
                                    <small class="text-muted">ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸</small>
                                </div>
                            </div>
                            <div class="card-body p-0">
                                <div class="map-container">
                                    <div id="worldMap"></div>
                                    <div class="map-overlay">
                                        <h6 class="mb-2">í˜„ì¬ ì‹œê°„</h6>
                                        <div id="mapCurrentTime" class="fw-bold"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Statistics Panel -->
                    <div class="col-lg-4">
                        <div class="card h-100">
                            <div class="card-header">
                                <h6 class="mb-0">
                                    <i class="fas fa-chart-pie me-2"></i>
                                    ìƒì„¸ í†µê³„
                                </h6>
                            </div>
                            <div class="card-body">
                                <!-- ë¬´ë£Œ ì‚¬ìš©ì -->
                                <div class="mb-4">
                                    <h6 class="text-primary mb-3">
                                        <i class="fas fa-users me-2"></i>ë¬´ë£Œ ì‚¬ìš©ì
                                    </h6>
                                    <div class="row g-2">
                                        <div class="col-6">
                                            <div class="stat-box clickable" onclick="filterMapByUserType('free', 'realtime')">
                                                <div class="stat-number" id="freeRealtime">145</div>
                                                <div class="stat-label">ì‹¤ì‹œê°„</div>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="stat-box clickable" onclick="filterMapByUserType('free', 'daily')">
                                                <div class="stat-number" id="freeDaily">1,234</div>
                                                <div class="stat-label">ì¼ê°„</div>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="stat-box clickable" onclick="filterMapByUserType('free', 'weekly')">
                                                <div class="stat-number" id="freeWeekly">8,567</div>
                                                <div class="stat-label">ì£¼ê°„</div>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="stat-box clickable" onclick="filterMapByUserType('free', 'monthly')">
                                                <div class="stat-number" id="freeMonthly">34,891</div>
                                                <div class="stat-label">ì›”ê°„</div>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="stat-box clickable" onclick="filterMapByUserType('free', 'quarterly')">
                                                <div class="stat-number" id="freeQuarterly">98,456</div>
                                                <div class="stat-label">ë¶„ê¸°ë³„</div>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="stat-box clickable" onclick="filterMapByUserType('free', 'yearly')">
                                                <div class="stat-number" id="freeYearly">387,234</div>
                                                <div class="stat-label">ë…„ê°„</div>
                                            </div>
                                        </div>
                                        <div class="col-12">
                                            <div class="stat-box total clickable" onclick="filterMapByUserType('free', 'total')">
                                                <div class="stat-number" id="freeTotal">387,234</div>
                                                <div class="stat-label">ì´ê³„</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- ìœ ë£Œ ì‚¬ìš©ì -->
                                <div class="mb-4">
                                    <h6 class="text-success mb-3">
                                        <i class="fas fa-crown me-2"></i>ìœ ë£Œ ì‚¬ìš©ì
                                    </h6>
                                    <div class="row g-2">
                                        <div class="col-6">
                                            <div class="stat-box clickable" onclick="filterMapByUserType('paid', 'realtime')">
                                                <div class="stat-number" id="paidRealtime">89</div>
                                                <div class="stat-label">ì‹¤ì‹œê°„</div>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="stat-box clickable" onclick="filterMapByUserType('paid', 'daily')">
                                                <div class="stat-number" id="paidDaily">567</div>
                                                <div class="stat-label">ì¼ê°„</div>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="stat-box clickable" onclick="filterMapByUserType('paid', 'weekly')">
                                                <div class="stat-number" id="paidWeekly">3,456</div>
                                                <div class="stat-label">ì£¼ê°„</div>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="stat-box clickable" onclick="filterMapByUserType('paid', 'monthly')">
                                                <div class="stat-number" id="paidMonthly">12,345</div>
                                                <div class="stat-label">ì›”ê°„</div>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="stat-box clickable" onclick="filterMapByUserType('paid', 'quarterly')">
                                                <div class="stat-number" id="paidQuarterly">34,567</div>
                                                <div class="stat-label">ë¶„ê¸°ë³„</div>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="stat-box clickable" onclick="filterMapByUserType('paid', 'yearly')">
                                                <div class="stat-number" id="paidYearly">125,678</div>
                                                <div class="stat-label">ë…„ê°„</div>
                                            </div>
                                        </div>
                                        <div class="col-12">
                                            <div class="stat-box total clickable" onclick="filterMapByUserType('paid', 'total')">
                                                <div class="stat-number" id="paidTotal">125,678</div>
                                                <div class="stat-label">ì´ê³„</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- í”„ë ˆë¯¸ì—„ ì‚¬ìš©ì -->
                                <div class="mb-4">
                                    <h6 class="text-warning mb-3">
                                        <i class="fas fa-gem me-2"></i>í”„ë ˆë¯¸ì—„ ì‚¬ìš©ì
                                    </h6>
                                    <div class="row g-2">
                                        <div class="col-6">
                                            <div class="stat-box clickable" onclick="filterMapByUserType('premium', 'realtime')">
                                                <div class="stat-number" id="premiumRealtime">27</div>
                                                <div class="stat-label">ì‹¤ì‹œê°„</div>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="stat-box clickable" onclick="filterMapByUserType('premium', 'daily')">
                                                <div class="stat-number" id="premiumDaily">189</div>
                                                <div class="stat-label">ì¼ê°„</div>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="stat-box clickable" onclick="filterMapByUserType('premium', 'weekly')">
                                                <div class="stat-number" id="premiumWeekly">1,234</div>
                                                <div class="stat-label">ì£¼ê°„</div>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="stat-box clickable" onclick="filterMapByUserType('premium', 'monthly')">
                                                <div class="stat-number" id="premiumMonthly">4,567</div>
                                                <div class="stat-label">ì›”ê°„</div>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="stat-box clickable" onclick="filterMapByUserType('premium', 'quarterly')">
                                                <div class="stat-number" id="premiumQuarterly">12,345</div>
                                                <div class="stat-label">ë¶„ê¸°ë³„</div>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="stat-box clickable" onclick="filterMapByUserType('premium', 'yearly')">
                                                <div class="stat-number" id="premiumYearly">45,678</div>
                                                <div class="stat-label">ë…„ê°„</div>
                                            </div>
                                        </div>
                                        <div class="col-12">
                                            <div class="stat-box total clickable" onclick="filterMapByUserType('premium', 'total')">
                                                <div class="stat-number" id="premiumTotal">45,678</div>
                                                <div class="stat-label">ì´ê³„</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- ìˆ˜ìµ í†µê³„ -->
                                <div>
                                    <h6 class="text-danger mb-3">
                                        <i class="fas fa-dollar-sign me-2"></i>ìˆ˜ìµ í†µê³„
                                    </h6>
                                    <div class="row g-2">
                                        <div class="col-6">
                                            <div class="stat-box">
                                                <div class="stat-number" id="revenueRealtime">$127</div>
                                                <div class="stat-label">ì‹¤ì‹œê°„</div>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="stat-box">
                                                <div class="stat-number" id="revenueDaily">$1,234</div>
                                                <div class="stat-label">ì¼ê°„</div>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="stat-box">
                                                <div class="stat-number" id="revenueWeekly">$8,567</div>
                                                <div class="stat-label">ì£¼ê°„</div>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="stat-box">
                                                <div class="stat-number" id="revenueMonthly">$34,890</div>
                                                <div class="stat-label">ì›”ê°„</div>
                                            </div>
                                        </div>
                                        <div class="col-12">
                                            <div class="stat-box total">
                                                <div class="stat-number" id="revenueTotal">$125,678</div>
                                                <div class="stat-label">ì´ ìˆ˜ìµ</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Charts Row -->
                <div class="row">
                    <!-- User Growth Chart -->
                    <div class="col-lg-6 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h6 class="mb-0">
                                    <i class="fas fa-chart-line me-2"></i>
                                    ëˆ„ì  ì‚¬ìš©ì ì¦ê°€
                                </h6>
                            </div>
                            <div class="card-body">
                                <div class="chart-container" style="height: 300px;">
                                    <canvas id="userGrowthChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Daily Activity Chart -->
                    <div class="col-lg-6 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h6 class="mb-0">
                                    <i class="fas fa-chart-bar me-2"></i>
                                    ì¼ì¼ í™œë™ëŸ‰
                                </h6>
                            </div>
                            <div class="card-body">
                                <div class="chart-container" style="height: 300px;">
                                    <canvas id="dailyActivityChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Top Countries Row -->
                <div class="row">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header">
                                <h6 class="mb-0">
                                    <i class="fas fa-flag me-2"></i>
                                    ìƒìœ„ êµ­ê°€ë³„ ì‚¬ìš©ì ë¶„í¬
                                </h6>
                            </div>
                            <div class="card-body">
                                <div class="row" id="topCountries">
                                    <div class="col-md-2 mb-3">
                                        <div class="text-center p-3 bg-light rounded">
                                            <div class="h4 mb-2">ğŸ‡°ğŸ‡·</div>
                                            <div class="fw-bold">ëŒ€í•œë¯¼êµ­</div>
                                            <div class="badge bg-primary mt-2">456ëª…</div>
                                        </div>
                                    </div>
                                    <div class="col-md-2 mb-3">
                                        <div class="text-center p-3 bg-light rounded">
                                            <div class="h4 mb-2">ğŸ‡ºğŸ‡¸</div>
                                            <div class="fw-bold">ë¯¸êµ­</div>
                                            <div class="badge bg-primary mt-2">234ëª…</div>
                                        </div>
                                    </div>
                                    <div class="col-md-2 mb-3">
                                        <div class="text-center p-3 bg-light rounded">
                                            <div class="h4 mb-2">ğŸ‡¯ğŸ‡µ</div>
                                            <div class="fw-bold">ì¼ë³¸</div>
                                            <div class="badge bg-primary mt-2">189ëª…</div>
                                        </div>
                                    </div>
                                    <div class="col-md-2 mb-3">
                                        <div class="text-center p-3 bg-light rounded">
                                            <div class="h4 mb-2">ğŸ‡¨ğŸ‡³</div>
                                            <div class="fw-bold">ì¤‘êµ­</div>
                                            <div class="badge bg-primary mt-2">156ëª…</div>
                                        </div>
                                    </div>
                                    <div class="col-md-2 mb-3">
                                        <div class="text-center p-3 bg-light rounded">
                                            <div class="h4 mb-2">ğŸ‡¬ğŸ‡§</div>
                                            <div class="fw-bold">ì˜êµ­</div>
                                            <div class="badge bg-primary mt-2">98ëª…</div>
                                        </div>
                                    </div>
                                    <div class="col-md-2 mb-3">
                                        <div class="text-center p-3 bg-light rounded">
                                            <div class="h4 mb-2">ğŸ‡©ğŸ‡ª</div>
                                            <div class="fw-bold">ë…ì¼</div>
                                            <div class="badge bg-primary mt-2">87ëª…</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Problems Management Section -->
            <div id="problems" class="content-section">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">
                            <i class="fas fa-question-circle me-2"></i>
                            ë¬¸ì œ ê´€ë¦¬
                        </h5>
                        <div class="btn-group" role="group">
                            <button class="btn btn-primary" onclick="openProblemModal()">
                                <i class="fas fa-plus me-2"></i>ìƒˆ ë¬¸ì œ ì¶”ê°€
                            </button>
                            <button class="btn btn-success" onclick="openQuestionEditor()" title="ìƒˆ ì°½ì—ì„œ ë¬¸ì œ í¸ì§‘ê¸°ë¥¼ ì—½ë‹ˆë‹¤">
                                <i class="fas fa-edit me-2"></i>ë¬¸ì œ í¸ì§‘ê¸°
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div id="problemsManagementSystem" style="border: 1px solid #e5e7eb; border-radius: 8px; height: 600px; overflow: hidden;">
                            <!-- ë¬¸ì œ ê´€ë¦¬ ì‹œìŠ¤í…œì´ ì—¬ê¸°ì— ë¡œë“œë©ë‹ˆë‹¤ -->
                            <div style="padding: 20px; text-align: center;">
                                <h4>ë¬¸ì œ ê´€ë¦¬ ì‹œìŠ¤í…œ ë¡œë”© ì¤‘...</h4>
                                <p>ìƒˆë¡œìš´ ë¬¸ì œ ê´€ë¦¬ ì‹œìŠ¤í…œì„ ì¤€ë¹„í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Other sections would go here -->
            <div id="users" class="content-section">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">
                            <i class="fas fa-users me-2"></i>
                            ì‚¬ìš©ì ê´€ë¦¬
                        </h5>
                    </div>
                    <div class="card-body">
                        <p>ì‚¬ìš©ì ê´€ë¦¬ ê¸°ëŠ¥ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
                    </div>
                </div>
            </div>

            <div id="ai-chat" class="content-section">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">
                            <i class="fas fa-robot me-2"></i>
                            AI ì±—ë´‡ ê´€ë¦¬
                        </h5>
                    </div>
                    <div class="card-body">
                        <p>AI ì±—ë´‡ ê´€ë¦¬ ê¸°ëŠ¥ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
                    </div>
                </div>
            </div>

            <div id="mathml" class="content-section">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">
                            <i class="fas fa-calculator me-2"></i>
                            MathML ë³€í™˜
                        </h5>
                    </div>
                    <div class="card-body">
                        <p>MathML ë³€í™˜ ê¸°ëŠ¥ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
                    </div>
                </div>
            </div>

            <div id="editor" class="content-section">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">
                            <i class="fas fa-edit me-2"></i>
                            ë°ì´í„° ë³€í™˜ í™•ì¸ ì—ë””í„°
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label for="problemId" class="form-label">ë¬¸ì œ ë²ˆí˜¸ (mpcstudy_db.sql)</label>
                            <input type="text" class="form-control" id="problemId" placeholder="ë¬¸ì œ ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”" value="1">
                        </div>
                        <button class="btn btn-primary" onclick="loadProblem()">
                            <i class="fas fa-download me-1"></i>ë¬¸ì œ ë¡œë“œ
                        </button>
                        <button class="btn btn-success ms-2" onclick="saveProblem()">
                            <i class="fas fa-save me-1"></i>ë³€í™˜ ê²°ê³¼ ì €ì¥
                        </button>
                        <button class="btn btn-info ms-2" onclick="previewProblem()">
                            <i class="fas fa-eye me-1"></i>ë¯¸ë¦¬ë³´ê¸°
                        </button>
                        <button class="btn btn-warning ms-2" onclick="compareWithOriginal()">
                            <i class="fas fa-balance-scale me-1"></i>ì›ë³¸ ë¹„êµ
                        </button>
                        
                    <div class="mt-4">
                        <div id="questionManagementSystem" style="border: 1px solid #ddd; border-radius: 8px; height: 700px; overflow: hidden;">
                            <!-- ë¬¸ì œ ê´€ë¦¬ ì‹œìŠ¤í…œì´ ì—¬ê¸°ì— ë¡œë“œë©ë‹ˆë‹¤ -->
                            <div style="padding: 20px; text-align: center;">
                                <h4>ë¬¸ì œ ê´€ë¦¬ ì‹œìŠ¤í…œ ë¡œë”© ì¤‘...</h4>
                                <p>ìƒˆë¡œìš´ ë¬¸ì œ ê´€ë¦¬ ì‹œìŠ¤í…œì„ ì¤€ë¹„í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
                            </div>
                        </div>
                    </div>
                    </div>
                </div>
            </div>

            <div id="analytics" class="content-section">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">
                            <i class="fas fa-chart-line me-2"></i>
                            ë¶„ì„ ë° í†µê³„
                        </h5>
                    </div>
                    <div class="card-body">
                        <p>ë¶„ì„ ë° í†µê³„ ê¸°ëŠ¥ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
                    </div>
                </div>
            </div>

            <div id="settings" class="content-section">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">
                            <i class="fas fa-cog me-2"></i>
                            ì‹œìŠ¤í…œ ì„¤ì •
                        </h5>
                    </div>
                    <div class="card-body">
                        <p>ì‹œìŠ¤í…œ ì„¤ì • ê¸°ëŠ¥ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        let worldMap;
        let mapMarkers = [];

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            // ìºì‹œ ë°©ì§€ë¥¼ ìœ„í•œ ê°•ì œ ìƒˆë¡œê³ ì¹¨ ì²´í¬
            const lastModified = localStorage.getItem('adminPageLastModified');
            const currentTime = Date.now();
            
            if (!lastModified || (currentTime - parseInt(lastModified)) > 300000) { // 5ë¶„ë§ˆë‹¤ ì²´í¬
                localStorage.setItem('adminPageLastModified', currentTime.toString());
                // í˜ì´ì§€ê°€ ì˜¤ë˜ëœ ê²½ìš° ê°•ì œ ìƒˆë¡œê³ ì¹¨
                if (lastModified && (currentTime - parseInt(lastModified)) > 600000) { // 10ë¶„ ì´ìƒ
                    window.location.reload(true);
                    return;
                }
            }
            
            initializeAdminPanel();
            updateCurrentTime();
            setInterval(updateCurrentTime, 1000);
            
            // ì°¨íŠ¸ ì´ˆê¸°í™” (Chart.js ë¡œë“œ í™•ì¸ í›„)
            setTimeout(() => {
                if (typeof Chart !== 'undefined') {
                    initializeCharts();
                } else {
                    console.warn('[CHARTS] Chart.js ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì•„ì§ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. 3ì´ˆ í›„ ì¬ì‹œë„...');
                    setTimeout(() => {
                        if (typeof Chart !== 'undefined') {
                            initializeCharts();
                        }
                    }, 3000);
                }
            }, 1000);
            
            // ì§€ë„ ê°•ì œ ì´ˆê¸°í™” (ëª¨ë“  ì´ˆê¸°í™” ì™„ë£Œ í›„)
            setTimeout(() => {
                console.log('[FORCE] ê°•ì œ ì§€ë„ ì´ˆê¸°í™” ì‹œì‘...');
                try {
                    if (typeof L !== 'undefined') {
                        forceInitMap();
                    } else {
                        console.error('[FORCE] Leaflet ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—†ìŒ');
                    }
                } catch (error) {
                    console.error('[FORCE] ì§€ë„ ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
                }
            }, 2000);
        });

        // ê´€ë¦¬ì íŒ¨ë„ ì´ˆê¸°í™”
        function initializeAdminPanel() {
            // ì‚¬ì´ë“œë°” ë„¤ë¹„ê²Œì´ì…˜ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const section = this.getAttribute('data-section');
                    showSection(section);

                    // í™œì„± ë§í¬ ì—…ë°ì´íŠ¸
                    document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                });
            });

            // ì´ˆê¸° ë°ì´í„° ë¡œë“œ
            loadSampleData();

            // ê¸°ë³¸ìœ¼ë¡œ ëŒ€ì‹œë³´ë“œ ì„¹ì…˜ í‘œì‹œ
            showSection('dashboard');
            document.querySelector('[data-section="dashboard"]').classList.add('active');

            // ì§€ë„ ì¦‰ì‹œ ì´ˆê¸°í™” (ëŒ€ì‹œë³´ë“œê°€ ê¸°ë³¸ì´ë¯€ë¡œ)
            setTimeout(() => {
                console.log('[INIT] í˜ì´ì§€ ë¡œë“œ ì‹œ ì§€ë„ ì´ˆê¸°í™” ì‹œì‘...');
                initWorldMap();
            }, 500);

            // ì‹¤ì‹œê°„ ë°ì´í„° ë¡œë“œ (30ì´ˆë§ˆë‹¤)
            setInterval(loadRealtimeData, 30000);
        }

        // ì„¹ì…˜ í‘œì‹œ
        function showSection(sectionName) {
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });

            document.getElementById(sectionName).classList.add('active');

            // ëŒ€ì‹œë³´ë“œ ì„¹ì…˜ì´ í‘œì‹œë  ë•Œ ì§€ë„ ì´ˆê¸°í™”
            if (sectionName === 'dashboard') {
                setTimeout(() => {
                    initWorldMap();
                }, 100);
            }

            // ì—ë””í„° ì„¹ì…˜ì´ í‘œì‹œë  ë•Œ ë¬¸ì œ ê´€ë¦¬ ì‹œìŠ¤í…œ ì´ˆê¸°í™”
            if (sectionName === 'editor') {
                setTimeout(() => {
                    initQuestionManagementSystem();
                }, 100);
            }

            // ë¬¸ì œ ê´€ë¦¬ ì„¹ì…˜ì´ í‘œì‹œë  ë•Œ ë¬¸ì œ ê´€ë¦¬ ì‹œìŠ¤í…œ ì´ˆê¸°í™”
            if (sectionName === 'problems') {
                setTimeout(() => {
                    initProblemsManagementSystem();
                }, 100);
            }

            // í˜ì´ì§€ ì œëª© ì—…ë°ì´íŠ¸
            const titles = {
                'dashboard': 'ëŒ€ì‹œë³´ë“œ',
                'problems': 'ë¬¸ì œ ê´€ë¦¬',
                'users': 'ì‚¬ìš©ì ê´€ë¦¬',
                'ai-chat': 'AI ì±—ë´‡ ê´€ë¦¬',
                'mathml': 'MathML ë³€í™˜',
                'editor': 'ë¬¸ì œ ì—ë””í„°',
                'analytics': 'ë¶„ì„ ë° í†µê³„',
                'settings': 'ì‹œìŠ¤í…œ ì„¤ì •'
            };

            document.getElementById('pageTitle').textContent = titles[sectionName] || 'ê´€ë¦¬ì íŒ¨ë„';
        }

        // í˜„ì¬ ì‹œê°„ ì—…ë°ì´íŠ¸
        function updateCurrentTime() {
            const now = new Date();
            const timeString = now.toLocaleString('ko-KR', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });

            document.getElementById('currentTime').textContent = timeString;
            document.getElementById('mapCurrentTime').textContent = timeString;
        }

        // ì„¸ê³„ ì§€ë„ ì´ˆê¸°í™”
        function initWorldMap() {
            console.log('[MAP] ğŸ—ºï¸ ì§€ë„ ì´ˆê¸°í™” ì‹œì‘');
            
            try {
                const mapEl = document.getElementById('worldMap');
                if (!mapEl) {
                    console.error('[MAP] âŒ worldMap ì»¨í…Œì´ë„ˆ ì—†ìŒ');
                    return;
                }
                
                if (typeof L === 'undefined') {
                    console.error('[MAP] âŒ Leaflet ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—†ìŒ');
                    // Leaflet ë™ì  ë¡œë“œ ì‹œë„
                    loadLeafletDynamically();
                    return;
                }
                
                console.log('[MAP] âœ… Leaflet ë²„ì „:', L.version);
                
                // ê¸°ì¡´ ì§€ë„ ì œê±°
                if (worldMap) {
                    console.log('[MAP] ğŸ—‘ï¸ ê¸°ì¡´ ì§€ë„ ì œê±°');
                    worldMap.remove();
                    worldMap = null;
                }
                
                // ì»¨í…Œì´ë„ˆ ì´ˆê¸°í™”
                mapEl.innerHTML = '';
                
                // ì§€ë„ ìƒì„±
                worldMap = L.map('worldMap').setView([39.8283, -98.5795], 4);
                console.log('[MAP] âœ… ì§€ë„ ê°ì²´ ìƒì„± ì™„ë£Œ');
                
                // íƒ€ì¼ ë ˆì´ì–´ ì¶”ê°€
                L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '&copy; OpenStreetMap contributors',
                    maxZoom: 18
                }).addTo(worldMap);
                console.log('[MAP] âœ… íƒ€ì¼ ë ˆì´ì–´ ì¶”ê°€ ì™„ë£Œ');
                
                // ë§ˆì»¤ ë°ì´í„°
                const cities = [
                    [40.7128, -74.0060, 'ğŸ—½ New York', 1247],
                    [34.0522, -118.2437, 'ğŸŒ´ Los Angeles', 892],
                    [43.6532, -79.3832, 'ğŸ Toronto', 387],
                    [37.7749, -122.4194, 'ğŸŒ‰ San Francisco', 567],
                    [41.8781, -87.6298, 'ğŸ™ï¸ Chicago', 634]
                ];
                
                // ë§ˆì»¤ ì¶”ê°€
                mapMarkers = [];
                cities.forEach(([lat, lng, name, users]) => {
                    const marker = L.marker([lat, lng])
                        .addTo(worldMap)
                        .bindPopup(`<strong>${name}</strong><br>í™œì„± ì‚¬ìš©ì: ${users}ëª…`);
                    mapMarkers.push(marker);
                });
                
                console.log('[MAP] âœ… ë§ˆì»¤ ì¶”ê°€ ì™„ë£Œ:', cities.length, 'ê°œ');
                console.log('[MAP] ğŸ‰ ì§€ë„ ì´ˆê¸°í™” ì„±ê³µ!');
                
                // í¬ê¸° ì¬ì¡°ì •
                setTimeout(() => {
                    if (worldMap) {
                        worldMap.invalidateSize();
                        console.log('[MAP] ğŸ”„ ì§€ë„ í¬ê¸° ì¬ì¡°ì • ì™„ë£Œ');
                    }
                }, 500);
                
            } catch (error) {
                console.error('[MAP] âŒ ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
                // ëŒ€ì²´ ì§€ë„ í‘œì‹œ
                showFallbackMap();
            }
        }
        
        // Leaflet ë™ì  ë¡œë“œ í•¨ìˆ˜
        function loadLeafletDynamically() {
            console.log('[MAP] ğŸ”„ Leaflet ë™ì  ë¡œë“œ ì‹œë„...');
            
            const css = document.createElement('link');
            css.rel = 'stylesheet';
            css.href = 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css';
            document.head.appendChild(css);
            
            const script = document.createElement('script');
            script.src = 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js';
            script.onload = function() {
                console.log('[MAP] âœ… Leaflet ë™ì  ë¡œë“œ ì„±ê³µ');
                setTimeout(initWorldMap, 500);
            };
            script.onerror = function() {
                console.error('[MAP] âŒ Leaflet ë™ì  ë¡œë“œ ì‹¤íŒ¨');
                showFallbackMap();
            };
            document.head.appendChild(script);
        }
        
        // ëŒ€ì²´ ì§€ë„ í‘œì‹œ
        function showFallbackMap() {
            console.log('[MAP] ğŸ”„ ëŒ€ì²´ ì§€ë„ í‘œì‹œ');
            const mapEl = document.getElementById('worldMap');
            if (mapEl) {
                mapEl.innerHTML = `
                    <div style="height: 100%; background: linear-gradient(to bottom, #87CEEB, #98FB98); 
                                display: flex; align-items: center; justify-content: center; 
                                flex-direction: column; color: #333; font-size: 16px; padding: 20px;">
                        <div style="background: white; padding: 25px; border-radius: 15px; 
                                    box-shadow: 0 8px 16px rgba(0,0,0,0.2); text-align: center; max-width: 400px;">
                            <h3 style="margin: 0 0 15px 0; color: #2c3e50;">ğŸ—ºï¸ ì‚¬ìš©ì ë¶„í¬ ì§€ë„</h3>
                            <div style="margin: 10px 0;">ğŸ“ <strong>New York</strong>: 1,247ëª…</div>
                            <div style="margin: 10px 0;">ğŸ“ <strong>Los Angeles</strong>: 892ëª…</div>
                            <div style="margin: 10px 0;">ğŸ“ <strong>Toronto</strong>: 387ëª…</div>
                            <div style="margin: 10px 0;">ğŸ“ <strong>San Francisco</strong>: 567ëª…</div>
                            <div style="margin: 10px 0;">ğŸ“ <strong>Chicago</strong>: 634ëª…</div>
                            <hr style="margin: 15px 0;">
                            <small style="color: #7f8c8d;">ğŸ”„ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸</small>
                        </div>
                    </div>
                `;
                console.log('[MAP] âœ… ëŒ€ì²´ ì§€ë„ í‘œì‹œ ì™„ë£Œ');
            }
        }

        // í†µê³„ ë°•ìŠ¤ í´ë¦­ ì‹œ ì§€ë„ í•„í„°ë§ í•¨ìˆ˜
        function filterMapByUserType(userType, timeFilter) {
            console.log(`[STATS] í•„í„° ì ìš©: ${userType} ì‚¬ìš©ì, ${timeFilter} ê¸°ê°„`);
            
            // ëª¨ë“  stat-boxì—ì„œ active í´ë˜ìŠ¤ ì œê±°
            document.querySelectorAll('.stat-box').forEach(box => {
                box.classList.remove('active');
            });
            
            // í´ë¦­ëœ ë°•ìŠ¤ì— active í´ë˜ìŠ¤ ì¶”ê°€
            if (event && event.target) {
                event.target.closest('.stat-box').classList.add('active');
            }
            
            // ì§€ë„ ì—…ë°ì´íŠ¸
            updateMapTitle(userType, timeFilter);
            
            // ì‹¤ì‹œê°„ ë°ì´í„° ì‹œë®¬ë ˆì´ì…˜
            if (timeFilter === 'realtime') {
                startRealtimeUpdate(userType);
            }
        }
        
        // ì§€ë„ ì œëª© ì—…ë°ì´íŠ¸
        function updateMapTitle(userType, timeFilter) {
            const mapHeader = document.querySelector('#worldMap').closest('.card').querySelector('.card-header h5');
            const userTypeText = {
                'free': 'ë¬´ë£Œ',
                'paid': 'ìœ ë£Œ', 
                'premium': 'í”„ë¦¬ë¯¸ì—„'
            }[userType] || userType;
            
            const timeFilterText = {
                'realtime': 'ì‹¤ì‹œê°„',
                'daily': 'ì¼ê°„',
                'weekly': 'ì£¼ê°„', 
                'monthly': 'ì›”ê°„',
                'quarterly': 'ë¶„ê¸°ë³„',
                'yearly': 'ë…„ê°„',
                'total': 'ì „ì²´'
            }[timeFilter];
            
            if (mapHeader) {
                mapHeader.innerHTML = `<i class="fas fa-globe me-2"></i>${userTypeText} ì‚¬ìš©ì ë¶„í¬ (${timeFilterText})`;
            }
        }
        
        // ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ì‹œë®¬ë ˆì´ì…˜
        function startRealtimeUpdate(userType) {
            const elementId = userType + 'Realtime';
            const element = document.getElementById(elementId);
            
            if (element) {
                setInterval(() => {
                    const currentValue = parseInt(element.textContent);
                    const newValue = currentValue + Math.floor(Math.random() * 5) - 2; // -2~+2 ë³€í™”
                    element.textContent = Math.max(0, newValue);
                }, 3000);
            }
        }

        // ê°•ì œ ì§€ë„ ì´ˆê¸°í™” (ë‹¨ìˆœ ë²„ì „)
        function forceInitMap() {
            console.log('[FORCE] ê°•ì œ ì§€ë„ ì´ˆê¸°í™” ì‹œì‘');
            
            try {
                const mapEl = document.getElementById('worldMap');
                if (!mapEl) {
                    console.error('[FORCE] worldMap ì—˜ë¦¬ë¨¼íŠ¸ ì—†ìŒ');
                    return;
                }
                
                if (worldMap) {
                    worldMap.remove();
                    worldMap = null;
                }
                
                worldMap = L.map('worldMap').setView([39.8283, -98.5795], 4);
                
                L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '&copy; OpenStreetMap'
                }).addTo(worldMap);
                
                L.marker([40.7128, -74.0060]).addTo(worldMap).bindPopup('ğŸ—½ New York');
                L.marker([34.0522, -118.2437]).addTo(worldMap).bindPopup('ğŸŒ´ Los Angeles');
                L.marker([43.6532, -79.3832]).addTo(worldMap).bindPopup('ğŸ Toronto');
                
                console.log('[FORCE] ê°•ì œ ì§€ë„ ì´ˆê¸°í™” ì™„ë£Œ!');
                
            } catch (error) {
                console.error('[FORCE] ê°•ì œ ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
            }
        }

        // ìƒ˜í”Œ ë°ì´í„° ë¡œë“œ
        function loadSampleData() {
            // ëŒ€ì‹œë³´ë“œ í†µê³„ ì—…ë°ì´íŠ¸
            document.getElementById('totalUsers').textContent = '1,247';
            document.getElementById('onlineUsers').textContent = '89';
            document.getElementById('realtimeUsers').textContent = '45';
            document.getElementById('totalProblems').textContent = '2,456';
            document.getElementById('solvedToday').textContent = '1,234';
            document.getElementById('aiInteractions').textContent = '5,678';
            document.getElementById('convertedMathML').textContent = '12,340';
        }

        // ì‹¤ì‹œê°„ ë°ì´í„° ë¡œë“œ
        async function loadRealtimeData() {
            try {
                console.log('ì‹¤ì‹œê°„ ë°ì´í„° ë¡œë“œ ì‹œë„...');
                
                // ì‹¤ì œ API í˜¸ì¶œ ëŒ€ì‹  ì‹œë®¬ë ˆì´ì…˜ëœ ì‹¤ì‹œê°„ ë°ì´í„° ì‚¬ìš©
                const realtimeUserData = await fetchRealtimeUserData();
                
                // ëŒ€ì‹œë³´ë“œ í†µê³„ ì—…ë°ì´íŠ¸
                updateDashboardStats(realtimeUserData);
                
                // ì§€ë„ ë§ˆì»¤ ì—…ë°ì´íŠ¸
                updateMapUserData(realtimeUserData);
                
            } catch (error) {
                console.error('ì‹¤ì‹œê°„ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
                // í´ë°±ìœ¼ë¡œ ê¸°ë³¸ ë°ì´í„° ì‚¬ìš©
                loadSampleData();
            }
        }

        // ì‹¤ì‹œê°„ ì‚¬ìš©ì ë°ì´í„° ê°€ì ¸ì˜¤ê¸° (ì‹œë®¬ë ˆì´ì…˜)
        async function fetchRealtimeUserData() {
            // ì‹¤ì œ í™˜ê²½ì—ì„œëŠ” API í˜¸ì¶œ: await fetch('/api/admin/realtime-users')
            
            // ì‹œë®¬ë ˆì´ì…˜: ì‹¤ì‹œê°„ ë³€ë™ë˜ëŠ” ì‚¬ìš©ì ìˆ˜
            const baseData = {
                'New York': { base: 1247, variance: 50 },
                'Los Angeles': { base: 892, variance: 40 },
                'Chicago': { base: 634, variance: 30 },
                'Houston': { base: 456, variance: 25 },
                'Phoenix': { base: 298, variance: 20 },
                'Toronto': { base: 387, variance: 25 },
                'Montreal': { base: 234, variance: 15 },
                'Vancouver': { base: 189, variance: 12 },
                'San Francisco': { base: 567, variance: 35 },
                'Seattle': { base: 423, variance: 30 }
            };

            const realtimeData = {};
            for (const [city, data] of Object.entries(baseData)) {
                const variation = Math.floor(Math.random() * data.variance * 2) - data.variance;
                realtimeData[city] = Math.max(0, data.base + variation);
            }

            return realtimeData;
        }

        // ëŒ€ì‹œë³´ë“œ í†µê³„ ì—…ë°ì´íŠ¸
        function updateDashboardStats(userData) {
            const totalUsers = Object.values(userData).reduce((sum, count) => sum + count, 0);
            const onlineUsers = Math.floor(totalUsers * 0.15); // 15% ì˜¨ë¼ì¸ ê°€ì •
            const realtimeUsers = Math.floor(onlineUsers * 0.6); // 60% ì‹¤ì‹œê°„ í™œì„±

            document.getElementById('totalUsers').textContent = totalUsers.toLocaleString();
            document.getElementById('onlineUsers').textContent = onlineUsers.toLocaleString();
            document.getElementById('realtimeUsers').textContent = realtimeUsers.toLocaleString();
        }

        // ì§€ë„ ë§ˆì»¤ ì‚¬ìš©ì ìˆ˜ ì—…ë°ì´íŠ¸
        function updateMapUserData(userData) {
            if (!worldMap || !mapMarkers) return;

            // íŒì—… ë‚´ì˜ ì‹¤ì‹œê°„ ì‚¬ìš©ì ìˆ˜ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.realtime-users').forEach(element => {
                const city = element.getAttribute('data-city');
                if (userData[city]) {
                    element.textContent = userData[city].toLocaleString();
                }
            });

            console.log('[worldMap] ì‹¤ì‹œê°„ ì‚¬ìš©ì ë°ì´í„° ì—…ë°ì´íŠ¸ ì™„ë£Œ');
        }

        // ì‹¤ì‹œê°„ ë°ì´í„° ì¦‰ì‹œ ìƒˆë¡œê³ ì¹¨ (ë²„íŠ¼ í´ë¦­ ì‹œ)
        async function refreshRealtimeData() {
            try {
                // ë¡œë”© í‘œì‹œ
                const realtimeElement = document.getElementById('realtimeUsers');
                const originalText = realtimeElement.textContent;
                realtimeElement.textContent = '...';
                realtimeElement.style.opacity = '0.6';

                console.log('ì‹¤ì‹œê°„ ë°ì´í„° ì¦‰ì‹œ ìƒˆë¡œê³ ì¹¨...');
                
                // ì‹¤ì‹œê°„ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
                const realtimeUserData = await fetchRealtimeUserData();
                
                // ëŒ€ì‹œë³´ë“œ ë° ì§€ë„ ì—…ë°ì´íŠ¸
                updateDashboardStats(realtimeUserData);
                updateMapUserData(realtimeUserData);
                
                // ë¡œë”© ì™„ë£Œ
                realtimeElement.style.opacity = '1';
                
                // ì„±ê³µ í”¼ë“œë°± (ì¼ì‹œì ìœ¼ë¡œ ìƒ‰ìƒ ë³€ê²½)
                realtimeElement.style.color = '#27ae60';
                setTimeout(() => {
                    realtimeElement.style.color = '';
                }, 1000);

                console.log('[realtime] ì¦‰ì‹œ ìƒˆë¡œê³ ì¹¨ ì™„ë£Œ');
                
            } catch (error) {
                console.error('ì‹¤ì‹œê°„ ë°ì´í„° ì¦‰ì‹œ ìƒˆë¡œê³ ì¹¨ ì‹¤íŒ¨:', error);
                
                // ì—ëŸ¬ ì‹œ ì›ë˜ ìƒíƒœë¡œ ë³µì›
                const realtimeElement = document.getElementById('realtimeUsers');
                realtimeElement.style.opacity = '1';
                realtimeElement.style.color = '#e74c3c';
                setTimeout(() => {
                    realtimeElement.style.color = '';
                }, 2000);
            }
        }

        // ë¬¸ì œ ê´€ë¦¬ í•¨ìˆ˜ë“¤
        function openProblemModal() {
            alert('ìƒˆ ë¬¸ì œ ì¶”ê°€ ëª¨ë‹¬ì´ ì—´ë¦½ë‹ˆë‹¤.');
        }

        function openQuestionEditor() {
            try {
                // ìƒˆ ì°½ì—ì„œ dreamseed_editor.html ì—´ê¸°
                const editorWindow = window.open('http://192.168.68.116:9000/dreamseed_editor.html', '_blank', 'width=1200,height=800,scrollbars=yes,resizable=yes');

                if (!editorWindow) {
                    alert('íŒì—…ì´ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤. ë¸Œë¼ìš°ì € ì„¤ì •ì—ì„œ íŒì—…ì„ í—ˆìš©í•´ì£¼ì„¸ìš”.');
                } else {
                    // ì°½ì´ ì„±ê³µì ìœ¼ë¡œ ì—´ë ¸ëŠ”ì§€ í™•ì¸
                    editorWindow.addEventListener('load', function() {
                        console.log('ë¬¸ì œ í¸ì§‘ê¸°ê°€ ì„±ê³µì ìœ¼ë¡œ ì—´ë ¸ìŠµë‹ˆë‹¤.');
                    });

                    editorWindow.addEventListener('error', function() {
                        alert('ë¬¸ì œ í¸ì§‘ê¸°ë¥¼ ì—´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸í•´ì£¼ì„¸ìš”.');
                    });
                }
            } catch (error) {
                console.error('ë¬¸ì œ í¸ì§‘ê¸° ì—´ê¸° ì˜¤ë¥˜:', error);
                alert('ë¬¸ì œ í¸ì§‘ê¸°ë¥¼ ì—´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
            }
        }

        // ë¬¸ì œ ê´€ë¦¬ ì‹œìŠ¤í…œ ìƒíƒœ
        let questionManagementSystem = null;
        let currentQuestions = [];
        let currentPage = 1;
        let totalPages = 1;
        let selectedQuestion = null;

        // ë¬¸ì œ ê´€ë¦¬ ì‹œìŠ¤í…œ ì´ˆê¸°í™” (ì—ë””í„°ìš©)
        function initQuestionManagementSystem() {
            const container = document.getElementById('questionManagementSystem');
            if (!container) return;

            container.innerHTML = `
                <div style="display: flex; height: 100%;">
                    <!-- ì™¼ìª½: ë¬¸ì œ ëª©ë¡ -->
                    <div style="width: 400px; border-right: 1px solid #e5e7eb; display: flex; flex-direction: column;">
                        <div style="padding: 16px; border-bottom: 1px solid #e5e7eb;">
                            <h4 style="margin: 0 0 16px 0; display: flex; align-items: center;">
                                ğŸ“š ë³€í™˜ëœ ë¬¸ì œ ëª©ë¡
                            </h4>
                            
                            <!-- ê²€ìƒ‰ -->
                            <div style="margin-bottom: 12px;">
                                <div style="position: relative;">
                                    <input type="text" id="questionSearch" placeholder="ë¬¸ì œ ê²€ìƒ‰..." 
                                           style="width: 100%; padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px; padding-left: 36px;">
                                    <span style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #6b7280;">ğŸ”</span>
                                </div>
                            </div>

                            <!-- í•„í„° -->
                            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; margin-bottom: 12px;">
                                <select id="subjectFilter" style="font-size: 12px; padding: 4px 8px; border: 1px solid #d1d5db; border-radius: 4px;">
                                    <option value="">ì „ì²´ ê³¼ëª©</option>
                                    <option value="mathematics">ìˆ˜í•™</option>
                                    <option value="physics">ë¬¼ë¦¬</option>
                                    <option value="chemistry">í™”í•™</option>
                                    <option value="biology">ìƒë¬¼</option>
                                </select>
                                
                                <select id="gradeFilter" style="font-size: 12px; padding: 4px 8px; border: 1px solid #d1d5db; border-radius: 4px;">
                                    <option value="">ì „ì²´ í•™ë…„</option>
                                    <option value="G6">6í•™ë…„</option>
                                    <option value="G7">7í•™ë…„</option>
                                    <option value="G8">8í•™ë…„</option>
                                    <option value="G9">9í•™ë…„</option>
                                    <option value="G10">10í•™ë…„</option>
                                    <option value="G11">11í•™ë…„</option>
                                    <option value="G12">12í•™ë…„</option>
                                </select>
                                
                                <select id="difficultyFilter" style="font-size: 12px; padding: 4px 8px; border: 1px solid #d1d5db; border-radius: 4px;">
                                    <option value="">ì „ì²´ ë‚œì´ë„</option>
                                    <option value="beginner">ì´ˆê¸‰</option>
                                    <option value="intermediate">ì¤‘ê¸‰</option>
                                    <option value="advanced">ê³ ê¸‰</option>
                                    <option value="expert">ì „ë¬¸ê°€</option>
                                </select>
                            </div>

                            <button onclick="searchQuestions()" 
                                    style="width: 100%; background: #3b82f6; color: white; padding: 8px; border: none; border-radius: 6px; cursor: pointer;">
                                ê²€ìƒ‰
                            </button>
                        </div>

                        <!-- ë¬¸ì œ ëª©ë¡ -->
                        <div id="questionsList" style="flex: 1; overflow-y: auto; padding: 8px;">
                            <div style="text-align: center; padding: 20px;">ë¡œë”© ì¤‘...</div>
                        </div>

                        <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
                        <div style="padding: 12px; border-top: 1px solid #e5e7eb; display: flex; justify-content: space-between; align-items: center;">
                            <div style="font-size: 12px; color: #6b7280;">
                                ì´ <span id="totalCount">0</span>ê°œ ë¬¸ì œ
                            </div>
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <button onclick="changePage(${currentPage - 1})" id="prevBtn" 
                                        style="padding: 4px; border: none; background: none; cursor: pointer;" disabled>
                                    â—€
                                </button>
                                <span style="font-size: 12px;">
                                    <span id="currentPage">1</span> / <span id="totalPages">1</span>
                                </span>
                                <button onclick="changePage(${currentPage + 1})" id="nextBtn" 
                                        style="padding: 4px; border: none; background: none; cursor: pointer;" disabled>
                                    â–¶
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- ì˜¤ë¥¸ìª½: ì—ë””í„° -->
                    <div style="flex: 1; display: flex; flex-direction: column;">
                        <div style="padding: 16px; border-bottom: 1px solid #e5e7eb;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                                <h4 style="margin: 0; display: flex; align-items: center;">
                                    âœï¸ ë¬¸ì œ í¸ì§‘ê¸°
                                </h4>
                                <div style="display: flex; gap: 8px;">
                                    <button onclick="showQuestionAttributes()" 
                                            style="display: flex; align-items: center; padding: 6px 12px; background: #f3f4f6; border: 1px solid #d1d5db; border-radius: 6px; cursor: pointer;">
                                        â„¹ï¸ ì†ì„± ì •ë³´
                                    </button>
                                    <button onclick="saveCurrentQuestion()" 
                                            style="display: flex; align-items: center; padding: 6px 12px; background: #3b82f6; color: white; border: none; border-radius: 6px; cursor: pointer;">
                                        ğŸ’¾ ì €ì¥
                                    </button>
                                </div>
                            </div>

                            <div id="questionInfo" style="background: #f9fafb; padding: 12px; border-radius: 6px; font-size: 14px; color: #6b7280;">
                                ë¬¸ì œë¥¼ ì„ íƒí•˜ì„¸ìš”
                            </div>
                        </div>

                        <!-- ì—ë””í„° ì˜ì—­ -->
                        <div style="flex: 1; padding: 16px;">
                            <div id="editorContent" 
                                 contenteditable="true" 
                                 style="min-height: 400px; padding: 16px; border: 1px solid #d1d5db; border-radius: 6px; outline: none;"
                                 placeholder="ë¬¸ì œ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”...">
                                ë¬¸ì œë¥¼ ì„ íƒí•˜ë©´ ì—¬ê¸°ì— ë‚´ìš©ì´ í‘œì‹œë©ë‹ˆë‹¤.
                            </div>
                        </div>
                    </div>
                </div>
            `;

            // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
            document.getElementById('questionSearch').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    searchQuestions();
                }
            });

            // ì´ˆê¸° ë°ì´í„° ë¡œë“œ
            loadQuestions();
        }

        // ë¬¸ì œ ê´€ë¦¬ ì‹œìŠ¤í…œ ì´ˆê¸°í™” (ë¬¸ì œ ê´€ë¦¬ìš©)
        function initProblemsManagementSystem() {
            const container = document.getElementById('problemsManagementSystem');
            if (!container) return;

            container.innerHTML = `
                <div style="display: flex; height: 100%;">
                    <!-- ì™¼ìª½: ë¬¸ì œ ëª©ë¡ -->
                    <div style="width: 100%; display: flex; flex-direction: column;">
                        <div style="padding: 16px; border-bottom: 1px solid #e5e7eb;">
                            <h4 style="margin: 0 0 16px 0; display: flex; align-items: center;">
                                ğŸ“š ë³€í™˜ëœ ë¬¸ì œ ëª©ë¡ (ìµœì‹ ìˆœ)
                            </h4>
                            
                            <!-- ê²€ìƒ‰ -->
                            <div style="margin-bottom: 12px;">
                                <div style="position: relative;">
                                    <input type="text" id="problemsSearch" placeholder="ë¬¸ì œ ê²€ìƒ‰..." 
                                           style="width: 100%; padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px; padding-left: 36px;">
                                    <span style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #6b7280;">ğŸ”</span>
                                </div>
                            </div>

                            <!-- í•„í„° -->
                            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; margin-bottom: 12px;">
                                <select id="problemsSubjectFilter" style="font-size: 12px; padding: 4px 8px; border: 1px solid #d1d5db; border-radius: 4px;">
                                    <option value="">ì „ì²´ ê³¼ëª©</option>
                                    <option value="mathematics">ìˆ˜í•™</option>
                                    <option value="physics">ë¬¼ë¦¬</option>
                                    <option value="chemistry">í™”í•™</option>
                                    <option value="biology">ìƒë¬¼</option>
                                </select>
                                
                                <select id="problemsGradeFilter" style="font-size: 12px; padding: 4px 8px; border: 1px solid #d1d5db; border-radius: 4px;">
                                    <option value="">ì „ì²´ í•™ë…„</option>
                                    <option value="G6">6í•™ë…„</option>
                                    <option value="G7">7í•™ë…„</option>
                                    <option value="G8">8í•™ë…„</option>
                                    <option value="G9">9í•™ë…„</option>
                                    <option value="G10">10í•™ë…„</option>
                                    <option value="G11">11í•™ë…„</option>
                                    <option value="G12">12í•™ë…„</option>
                                </select>
                                
                                <select id="problemsDifficultyFilter" style="font-size: 12px; padding: 4px 8px; border: 1px solid #d1d5db; border-radius: 4px;">
                                    <option value="">ì „ì²´ ë‚œì´ë„</option>
                                    <option value="beginner">ì´ˆê¸‰</option>
                                    <option value="intermediate">ì¤‘ê¸‰</option>
                                    <option value="advanced">ê³ ê¸‰</option>
                                    <option value="expert">ì „ë¬¸ê°€</option>
                                </select>
                            </div>

                            <button onclick="searchProblems()" 
                                    style="width: 100%; background: #3b82f6; color: white; padding: 8px; border: none; border-radius: 6px; cursor: pointer;">
                                ê²€ìƒ‰
                            </button>
                        </div>

                        <!-- ë¬¸ì œ ëª©ë¡ -->
                        <div id="problemsList" style="flex: 1; overflow-y: auto; padding: 8px;">
                            <div style="text-align: center; padding: 20px;">ë¡œë”© ì¤‘...</div>
                        </div>

                        <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
                        <div style="padding: 12px; border-top: 1px solid #e5e7eb; display: flex; justify-content: space-between; align-items: center;">
                            <div style="font-size: 12px; color: #6b7280;">
                                ì´ <span id="problemsTotalCount">0</span>ê°œ ë¬¸ì œ
                            </div>
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <button onclick="changeProblemsPage(${currentPage - 1})" id="problemsPrevBtn" 
                                        style="padding: 4px; border: none; background: none; cursor: pointer;" disabled>
                                    â—€
                                </button>
                                <span style="font-size: 12px;">
                                    <span id="problemsCurrentPage">1</span> / <span id="problemsTotalPages">1</span>
                                </span>
                                <button onclick="changeProblemsPage(${currentPage + 1})" id="problemsNextBtn" 
                                        style="padding: 4px; border: none; background: none; cursor: pointer;" disabled>
                                    â–¶
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
            document.getElementById('problemsSearch').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    searchProblems();
                }
            });

            // ì´ˆê¸° ë°ì´í„° ë¡œë“œ (ë§ˆì§€ë§‰ ë ˆì½”ë“œë¶€í„°)
            loadProblems();
        }

        // ë¬¸ì œ ëª©ë¡ ë¡œë“œ (ì—ë””í„°ìš©)
        async function loadQuestions(page = 1) {
            try {
                const params = new URLSearchParams({
                    page: page.toString(),
                    page_size: '100'
                });

                const response = await fetch(`http://localhost:8006/api/admin/questions?${params}`);
                const data = await response.json();
                
                currentQuestions = data.questions;
                currentPage = data.page;
                totalPages = data.total_pages;
                
                renderQuestionsList();
                updatePagination();
            } catch (error) {
                console.error('ë¬¸ì œ ëª©ë¡ ë¡œë“œ ì‹¤íŒ¨:', error);
                document.getElementById('questionsList').innerHTML = '<div style="text-align: center; padding: 20px; color: #dc2626;">ë¡œë”© ì‹¤íŒ¨</div>';
            }
        }

        // ë¬¸ì œ ëª©ë¡ ë¡œë“œ (ë¬¸ì œ ê´€ë¦¬ìš© - ë§ˆì§€ë§‰ ë ˆì½”ë“œë¶€í„°)
        async function loadProblems(page = 1) {
            try {
                const params = new URLSearchParams({
                    page: page.toString(),
                    page_size: '100'
                });

                const response = await fetch(`http://localhost:8006/api/admin/questions?${params}`);
                const data = await response.json();
                
                // ë§ˆì§€ë§‰ ë ˆì½”ë“œë¶€í„° í‘œì‹œí•˜ê¸° ìœ„í•´ ì—­ìˆœìœ¼ë¡œ ì •ë ¬
                const reversedQuestions = data.questions.reverse();
                
                currentQuestions = reversedQuestions;
                currentPage = data.page;
                totalPages = data.total_pages;
                
                renderProblemsList();
                updateProblemsPagination();
            } catch (error) {
                console.error('ë¬¸ì œ ëª©ë¡ ë¡œë“œ ì‹¤íŒ¨:', error);
                document.getElementById('problemsList').innerHTML = '<div style="text-align: center; padding: 20px; color: #dc2626;">ë¡œë”© ì‹¤íŒ¨</div>';
            }
        }

        // ë¬¸ì œ ëª©ë¡ ë Œë”ë§ (ì—ë””í„°ìš©)
        function renderQuestionsList() {
            const container = document.getElementById('questionsList');
            if (!container) return;

            if (currentQuestions.length === 0) {
                container.innerHTML = '<div style="text-align: center; padding: 20px;">ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤</div>';
                return;
            }

            const html = currentQuestions.map(question => `
                <div onclick="selectQuestion('${question.id}')" 
                     style="padding: 12px; border: 1px solid #e5e7eb; border-radius: 6px; margin-bottom: 8px; cursor: pointer; transition: all 0.2s;"
                     onmouseover="this.style.borderColor='#3b82f6'; this.style.backgroundColor='#eff6ff';"
                     onmouseout="this.style.borderColor='#e5e7eb'; this.style.backgroundColor='white';">
                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 8px;">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span style="font-size: 16px;">${getSubjectIcon(question.subject)}</span>
                            <span style="font-weight: 500; font-size: 14px;">${question.title}</span>
                        </div>
                        <span style="padding: 2px 8px; border-radius: 12px; font-size: 11px; ${getDifficultyColor(question.difficulty_level)}">
                            ${getDifficultyName(question.difficulty_level)}
                        </span>
                    </div>
                    
                    <div style="font-size: 12px; color: #6b7280; display: grid; grid-template-columns: 1fr 1fr; gap: 4px;">
                        <div>ID: ${question.legacy_id}</div>
                        <div>ê³¼ëª©: ${getSubjectName(question.subject)}</div>
                        <div>í•™ë…„: ${question.grade_code}</div>
                        <div>ìœ í˜•: ${getQuestionTypeName(question.question_type)}</div>
                    </div>
                </div>
            `).join('');

            container.innerHTML = html;
        }

        // ë¬¸ì œ ëª©ë¡ ë Œë”ë§ (ë¬¸ì œ ê´€ë¦¬ìš©)
        function renderProblemsList() {
            const container = document.getElementById('problemsList');
            if (!container) return;

            if (currentQuestions.length === 0) {
                container.innerHTML = '<div style="text-align: center; padding: 20px;">ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤</div>';
                return;
            }

            const html = currentQuestions.map(question => `
                <div style="padding: 12px; border: 1px solid #e5e7eb; border-radius: 6px; margin-bottom: 8px; transition: all 0.2s;"
                     onmouseover="this.style.borderColor='#3b82f6'; this.style.backgroundColor='#eff6ff';"
                     onmouseout="this.style.borderColor='#e5e7eb'; this.style.backgroundColor='white';">
                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 8px;">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span style="font-size: 16px;">${getSubjectIcon(question.subject)}</span>
                            <span style="font-weight: 500; font-size: 14px;">${question.title}</span>
                        </div>
                        <div style="display: flex; gap: 4px;">
                            <span style="padding: 2px 8px; border-radius: 12px; font-size: 11px; ${getDifficultyColor(question.difficulty_level)}">
                                ${getDifficultyName(question.difficulty_level)}
                            </span>
                            <button onclick="editProblemFromList('${question.id}')" 
                                    style="padding: 4px 8px; background: #3b82f6; color: white; border: none; border-radius: 4px; font-size: 11px; cursor: pointer;">
                                í¸ì§‘
                            </button>
                        </div>
                    </div>
                    
                    <div style="font-size: 12px; color: #6b7280; display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 4px;">
                        <div>ID: ${question.legacy_id}</div>
                        <div>ê³¼ëª©: ${getSubjectName(question.subject)}</div>
                        <div>í•™ë…„: ${question.grade_code}</div>
                        <div>ìœ í˜•: ${getQuestionTypeName(question.question_type)}</div>
                        <div>ìƒì„±ì¼: ${new Date(question.created_at).toLocaleDateString()}</div>
                        <div>ìˆ˜ì •ì¼: ${new Date(question.updated_at).toLocaleDateString()}</div>
                    </div>
                </div>
            `).join('');

            container.innerHTML = html;
        }

        // í˜ì´ì§€ë„¤ì´ì…˜ ì—…ë°ì´íŠ¸ (ì—ë””í„°ìš©)
        function updatePagination() {
            document.getElementById('totalCount').textContent = currentQuestions.length * totalPages;
            document.getElementById('currentPage').textContent = currentPage;
            document.getElementById('totalPages').textContent = totalPages;
            
            document.getElementById('prevBtn').disabled = currentPage === 1;
            document.getElementById('nextBtn').disabled = currentPage === totalPages;
        }

        // í˜ì´ì§€ë„¤ì´ì…˜ ì—…ë°ì´íŠ¸ (ë¬¸ì œ ê´€ë¦¬ìš©)
        function updateProblemsPagination() {
            document.getElementById('problemsTotalCount').textContent = currentQuestions.length * totalPages;
            document.getElementById('problemsCurrentPage').textContent = currentPage;
            document.getElementById('problemsTotalPages').textContent = totalPages;
            
            document.getElementById('problemsPrevBtn').disabled = currentPage === 1;
            document.getElementById('problemsNextBtn').disabled = currentPage === totalPages;
        }

        // í˜ì´ì§€ ë³€ê²½ (ì—ë””í„°ìš©)
        function changePage(page) {
            if (page >= 1 && page <= totalPages) {
                loadQuestions(page);
            }
        }

        // í˜ì´ì§€ ë³€ê²½ (ë¬¸ì œ ê´€ë¦¬ìš©)
        function changeProblemsPage(page) {
            if (page >= 1 && page <= totalPages) {
                loadProblems(page);
            }
        }

        // ë¬¸ì œ ì„ íƒ
        async function selectQuestion(questionId) {
            try {
                const response = await fetch(`http://localhost:8006/api/admin/questions/${questionId}`);
                const question = await response.json();
                
                selectedQuestion = question;
                
                // ë¬¸ì œ ì •ë³´ í‘œì‹œ
                document.getElementById('questionInfo').innerHTML = `
                    <div><strong>ì œëª©:</strong> ${question.title}</div>
                    <div><strong>ê³¼ëª©:</strong> ${getSubjectName(question.subject)}</div>
                    <div><strong>í•™ë…„:</strong> ${question.grade_code}</div>
                    <div><strong>ë‚œì´ë„:</strong> ${getDifficultyName(question.difficulty_level)}</div>
                `;
                
                // ì—ë””í„°ì— ë‚´ìš© ë¡œë“œ
                document.getElementById('editorContent').innerHTML = question.content_question_mj;
                
            } catch (error) {
                console.error('ë¬¸ì œ ìƒì„¸ ì •ë³´ ë¡œë“œ ì‹¤íŒ¨:', error);
                alert('ë¬¸ì œ ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // ê²€ìƒ‰ (ì—ë””í„°ìš©)
        function searchQuestions() {
            // ê²€ìƒ‰ ê¸°ëŠ¥ì€ ë‚˜ì¤‘ì— êµ¬í˜„
            loadQuestions(1);
        }

        // ê²€ìƒ‰ (ë¬¸ì œ ê´€ë¦¬ìš©)
        function searchProblems() {
            // ê²€ìƒ‰ ê¸°ëŠ¥ì€ ë‚˜ì¤‘ì— êµ¬í˜„
            loadProblems(1);
        }

        // ë¬¸ì œ ëª©ë¡ì—ì„œ í¸ì§‘
        function editProblemFromList(questionId) {
            // ë¬¸ì œ ì—ë””í„° ì„¹ì…˜ìœ¼ë¡œ ì´ë™í•˜ì—¬ í•´ë‹¹ ë¬¸ì œ ë¡œë“œ
            showSection('editor');
            setTimeout(() => {
                selectQuestion(questionId);
            }, 200);
        }

        // ë¬¸ì œ ì €ì¥
        async function saveCurrentQuestion() {
            if (!selectedQuestion) {
                alert('ì €ì¥í•  ë¬¸ì œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }

            try {
                const content = document.getElementById('editorContent').innerHTML;
                const updatedQuestion = {
                    ...selectedQuestion,
                    content_question_mj: content
                };

                const response = await fetch(`http://localhost:8006/api/admin/questions/${selectedQuestion.id}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(updatedQuestion)
                });

                if (response.ok) {
                    alert('ë¬¸ì œê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
                    loadQuestions(currentPage); // ëª©ë¡ ìƒˆë¡œê³ ì¹¨
                } else {
                    alert('ë¬¸ì œ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                console.error('ë¬¸ì œ ì €ì¥ ì‹¤íŒ¨:', error);
                alert('ë¬¸ì œ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // ì†ì„± ì •ë³´ í‘œì‹œ
        function showQuestionAttributes() {
            if (!selectedQuestion) {
                alert('ì†ì„±ì„ í™•ì¸í•  ë¬¸ì œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }

            const attributes = `
                <div style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 1000;">
                    <div style="background: white; border-radius: 8px; padding: 24px; max-width: 600px; max-height: 80vh; overflow-y: auto;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                            <h3 style="margin: 0;">ë¬¸ì œ ì†ì„± ì •ë³´</h3>
                            <button onclick="this.closest('.modal').remove()" style="background: none; border: none; font-size: 20px; cursor: pointer;">âœ•</button>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; font-size: 14px;">
                            <div><strong>ID:</strong> ${selectedQuestion.id}</div>
                            <div><strong>Legacy ID:</strong> ${selectedQuestion.legacy_id}</div>
                            <div><strong>ì œëª©:</strong> ${selectedQuestion.title}</div>
                            <div><strong>ê³¼ëª©:</strong> ${getSubjectName(selectedQuestion.subject)}</div>
                            <div><strong>ì½”ìŠ¤:</strong> ${selectedQuestion.course}</div>
                            <div><strong>í•™ë…„:</strong> ${selectedQuestion.grade_code}</div>
                            <div><strong>êµìœ¡ ìˆ˜ì¤€:</strong> ${selectedQuestion.education_level}</div>
                            <div><strong>ë‚œì´ë„:</strong> ${getDifficultyName(selectedQuestion.difficulty_level)}</div>
                            <div><strong>ë‚œì´ë„ ì ìˆ˜:</strong> ${selectedQuestion.difficulty_score}/10</div>
                            <div><strong>ë¬¸ì œ ìœ í˜•:</strong> ${getQuestionTypeName(selectedQuestion.question_type)}</div>
                            <div><strong>MathML í¬í•¨:</strong> ${selectedQuestion.has_mathml ? 'ì˜ˆ' : 'ì•„ë‹ˆì˜¤'}</div>
                            <div><strong>ìˆ˜í•™ ë³µì¡ë„:</strong> ${selectedQuestion.math_complexity}</div>
                        </div>
                        
                        <div style="margin-top: 16px;">
                            <strong>ìŠ¤í‚¬ íƒœê·¸:</strong>
                            <div style="display: flex; flex-wrap: wrap; gap: 4px; margin-top: 8px;">
                                ${selectedQuestion.skill_tags.map(tag => 
                                    `<span style="padding: 2px 8px; background: #dbeafe; color: #1e40af; border-radius: 12px; font-size: 12px;">${tag}</span>`
                                ).join('')}
                            </div>
                        </div>
                        
                        <div style="margin-top: 16px;">
                            <strong>LaTeX í‘œí˜„ì‹:</strong>
                            <div style="margin-top: 8px;">
                                ${selectedQuestion.latex_expressions.map(expr => 
                                    `<div style="background: #f3f4f6; padding: 8px; border-radius: 4px; font-family: monospace; font-size: 12px; margin-bottom: 4px;">${expr}</div>`
                                ).join('')}
                            </div>
                        </div>
                        
                        <div style="margin-top: 16px; font-size: 12px; color: #6b7280;">
                            <div><strong>ìƒì„±ì¼:</strong> ${new Date(selectedQuestion.created_at).toLocaleString()}</div>
                            <div><strong>ìˆ˜ì •ì¼:</strong> ${new Date(selectedQuestion.updated_at).toLocaleString()}</div>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', attributes);
        }

        // ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤
        function getSubjectIcon(subject) {
            const icons = {
                'mathematics': 'ğŸ”¢',
                'physics': 'âš›ï¸',
                'chemistry': 'ğŸ§ª',
                'biology': 'ğŸ§¬'
            };
            return icons[subject] || 'ğŸ“š';
        }

        function getSubjectName(subject) {
            const names = {
                'mathematics': 'ìˆ˜í•™',
                'physics': 'ë¬¼ë¦¬',
                'chemistry': 'í™”í•™',
                'biology': 'ìƒë¬¼'
            };
            return names[subject] || subject;
        }

        function getDifficultyName(difficulty) {
            const names = {
                'beginner': 'ì´ˆê¸‰',
                'intermediate': 'ì¤‘ê¸‰',
                'advanced': 'ê³ ê¸‰',
                'expert': 'ì „ë¬¸ê°€'
            };
            return names[difficulty] || difficulty;
        }

        function getDifficultyColor(difficulty) {
            const colors = {
                'beginner': 'background: #dcfce7; color: #166534;',
                'intermediate': 'background: #fef3c7; color: #92400e;',
                'advanced': 'background: #fed7aa; color: #c2410c;',
                'expert': 'background: #fecaca; color: #dc2626;'
            };
            return colors[difficulty] || 'background: #f3f4f6; color: #374151;';
        }

        function getQuestionTypeName(type) {
            const names = {
                'multiple_choice': 'ê°ê´€ì‹',
                'problem_solving': 'ë¬¸ì œí•´ê²°',
                'proof': 'ì¦ëª…',
                'explanation': 'ì„¤ëª…'
            };
            return names[type] || type;
        }

        // ì—ë””í„° ê´€ë ¨ í•¨ìˆ˜ë“¤ (ê¸°ì¡´ í˜¸í™˜ì„± ìœ ì§€)
        function loadProblem() {
            const problemId = document.getElementById('problemId').value;
            if (!problemId) {
                alert('ë¬¸ì œ ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            // ìƒˆë¡œìš´ ì‹œìŠ¤í…œì—ì„œ ë¬¸ì œ ë¡œë“œ
            selectQuestion(`q-${problemId.padStart(4, '0')}`);
        }

        function saveProblem() {
            saveCurrentQuestion();
        }

        function previewProblem() {
            if (!selectedQuestion) {
                alert('ë¯¸ë¦¬ë³´ê¸°í•  ë¬¸ì œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }
            alert('ë¯¸ë¦¬ë³´ê¸° ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.');
        }

        function compareWithOriginal() {
            if (!selectedQuestion) {
                alert('ë¹„êµí•  ë¬¸ì œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }
            alert('ì›ë³¸ ë¹„êµ ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.');
        }

        // iframeê³¼ì˜ í†µì‹ ì„ ìœ„í•œ ë©”ì‹œì§€ ë¦¬ìŠ¤ë„ˆ
        window.addEventListener('message', function(event) {
            if (event.data && event.data.action) {
                switch (event.data.action) {
                    case 'problemLoaded':
                        console.log('ë¬¸ì œê°€ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤:', event.data.problemId);
                        break;
                    case 'problemSaved':
                        console.log('ë³€í™˜ ê²°ê³¼ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤:', event.data.problemId);
                        alert('ë³€í™˜ ê²°ê³¼ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
                        break;
                    case 'previewReady':
                        console.log('ë¯¸ë¦¬ë³´ê¸°ê°€ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤.');
                        break;
                    case 'comparisonReady':
                        console.log('ì›ë³¸ ë¹„êµê°€ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤.');
                        break;
                    case 'error':
                        console.error('ì—ë””í„° ì˜¤ë¥˜:', event.data.message);
                        alert('ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + event.data.message);
                        break;
                }
            }
        });

        function editProblem(id) {
            alert(`ë¬¸ì œ ${id} í¸ì§‘ ëª¨ë‹¬ì´ ì—´ë¦½ë‹ˆë‹¤.`);
        }

        function deleteProblem(id) {
            if (confirm(`ë¬¸ì œ ${id}ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                alert(`ë¬¸ì œ ${id}ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.`);
            }
        }

        // ì°¨íŠ¸ ì´ˆê¸°í™” í•¨ìˆ˜ë“¤
        function initializeCharts() {
            console.log('[CHARTS] ì°¨íŠ¸ ì´ˆê¸°í™” ì‹œì‘');
            
            // Chart.jsê°€ ë¡œë“œë˜ì—ˆëŠ”ì§€ í™•ì¸
            if (typeof Chart === 'undefined') {
                console.error('[CHARTS] Chart.js ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
                return;
            }
            
            // ì‚¬ìš©ì ì¦ê°€ ì°¨íŠ¸
            initUserGrowthChart();
            
            // ì¼ì¼ í™œë™ëŸ‰ ì°¨íŠ¸  
            initDailyActivityChart();
        }

        function initUserGrowthChart() {
            const ctx = document.getElementById('userGrowthChart');
            if (!ctx) {
                console.log('[CHARTS] userGrowthChart ìº”ë²„ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
                return;
            }

            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['1ì›”', '2ì›”', '3ì›”', '4ì›”', '5ì›”', '6ì›”', '7ì›”', '8ì›”', '9ì›”', '10ì›”'],
                    datasets: [{
                        label: 'ë¬´ë£Œ ì‚¬ìš©ì',
                        data: [1200, 1900, 3000, 5000, 7500, 12000, 18000, 25000, 35000, 45000],
                        borderColor: 'rgb(75, 192, 192)',
                        backgroundColor: 'rgba(75, 192, 192, 0.1)',
                        tension: 0.1
                    }, {
                        label: 'ìœ ë£Œ ì‚¬ìš©ì',
                        data: [100, 250, 500, 800, 1200, 2000, 3500, 5500, 8000, 12000],
                        borderColor: 'rgb(255, 99, 132)',
                        backgroundColor: 'rgba(255, 99, 132, 0.1)',
                        tension: 0.1
                    }, {
                        label: 'í”„ë¦¬ë¯¸ì—„ ì‚¬ìš©ì',
                        data: [50, 120, 200, 350, 550, 800, 1200, 1800, 2500, 3500],
                        borderColor: 'rgb(255, 205, 86)',
                        backgroundColor: 'rgba(255, 205, 86, 0.1)',
                        tension: 0.1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    }
                }
            });
            console.log('[CHARTS] ì‚¬ìš©ì ì¦ê°€ ì°¨íŠ¸ ì´ˆê¸°í™” ì™„ë£Œ');
        }

        function initDailyActivityChart() {
            const ctx = document.getElementById('dailyActivityChart');
            if (!ctx) {
                console.log('[CHARTS] dailyActivityChart ìº”ë²„ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
                return;
            }

            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† ', 'ì¼'],
                    datasets: [{
                        label: 'ì ‘ì†ì ìˆ˜',
                        data: [1200, 1900, 2300, 2100, 2800, 1500, 900],
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.8)',
                            'rgba(54, 162, 235, 0.8)',
                            'rgba(255, 205, 86, 0.8)',
                            'rgba(75, 192, 192, 0.8)',
                            'rgba(153, 102, 255, 0.8)',
                            'rgba(255, 159, 64, 0.8)',
                            'rgba(199, 199, 199, 0.8)'
                        ],
                        borderColor: [
                            'rgba(255, 99, 132, 1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 205, 86, 1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(153, 102, 255, 1)',
                            'rgba(255, 159, 64, 1)',
                            'rgba(199, 199, 199, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
            console.log('[CHARTS] ì¼ì¼ í™œë™ëŸ‰ ì°¨íŠ¸ ì´ˆê¸°í™” ì™„ë£Œ');
        }
    </script>
</body>
</html>
