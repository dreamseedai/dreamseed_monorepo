[Unit]
Description=Portal API (FastAPI/Uvicorn)
After=network.target

[Service]
User=www-data
Group=www-data
WorkingDirectory=/srv/portal_api
Environment="PORT=8000"
ExecStart=/usr/bin/env bash -lc 'source .venv/bin/activate && exec uvicorn app:app --host 127.0.0.1 --port ${PORT} --workers 2'
Restart=always
RestartSec=3

[Install]
WantedBy=multi-user.target


