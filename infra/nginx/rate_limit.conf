# Global rate limit zones (http context)
# Example usage: include in http{} and reference in server/location

# ~ 100 requests per minute per IP
limit_req_zone $binary_remote_addr zone=req_per_ip:10m rate=100r/m;

# ~ 10 requests per second per IP (short burst)
limit_req_zone $binary_remote_addr zone=req_per_ip_burst:10m rate=10r/s;

# connection limiting per IP
limit_conn_zone $binary_remote_addr zone=conn_per_ip:10m;

# In server/location:
#   limit_req zone=req_per_ip burst=50 nodelay;
#   limit_conn conn_per_ip 20;
