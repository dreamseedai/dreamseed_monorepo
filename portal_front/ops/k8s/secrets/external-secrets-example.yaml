# ExternalSecret 예시 (External Secrets Operator 사용)
# 실제 사용 시 namespace와 clusterSecretStore 설정 확인 필요
#
# 설치 가이드:
#   kubectl apply -f https://raw.githubusercontent.com/external-secrets/external-secrets/main/deploy/crds/bundle.yaml
#   helm install external-secrets external-secrets/external-secrets -n external-secrets-system --create-namespace
#
# 사용 예시:
#   kubectl apply -f portal_front/ops/k8s/secrets/external-secrets-example.yaml

# ---
# # Example: AWS Secrets Manager에서 크레덴셜 가져오기
# apiVersion: external-secrets.io/v1beta1
# kind: ExternalSecret
# metadata:
#   name: aws-s3-credentials-es
#   namespace: seedtest
# spec:
#   refreshInterval: 1h
#   secretStoreRef:
#     name: aws-secrets-manager
#     kind: ClusterSecretStore
#   target:
#     name: aws-s3-credentials
#     creationPolicy: Owner
#   data:
#   - secretKey: AWS_ACCESS_KEY_ID
#     remoteRef:
#       key: seedtest/reports/s3  # AWS Secrets Manager ARN 또는 키
#       property: access_key_id
#   - secretKey: AWS_SECRET_ACCESS_KEY
#     remoteRef:
#       key: seedtest/reports/s3
#       property: secret_access_key
# ---
# # Example: GCP Secret Manager에서 DB URL 가져오기
# apiVersion: external-secrets.io/v1beta1
# kind: ExternalSecret
# metadata:
#   name: seedtest-db-credentials-es
#   namespace: seedtest
# spec:
#   refreshInterval: 1h
#   secretStoreRef:
#     name: gcp-secret-manager
#     kind: ClusterSecretStore
#   target:
#     name: seedtest-db-credentials
#     creationPolicy: Owner
#   data:
#   - secretKey: DATABASE_URL
#     remoteRef:
#       key: seedtest-db-url  # GCP Secret Manager secret ID
# ---
# # Example: HashiCorp Vault에서 r-irt-plumber 토큰 가져오기
# apiVersion: external-secrets.io/v1beta1
# kind: ExternalSecret
# metadata:
#   name: r-irt-credentials-es
#   namespace: seedtest
# spec:
#   refreshInterval: 1h
#   secretStoreRef:
#     name: vault-backend
#     kind: ClusterSecretStore
#   target:
#     name: r-irt-credentials
#     creationPolicy: Owner
#   data:
#   - secretKey: token
#     remoteRef:
#       key: seedtest/r-irt-plumber/token  # Vault 경로
# ---

# ClusterSecretStore 예시 (AWS Secrets Manager)
# apiVersion: external-secrets.io/v1beta1
# kind: ClusterSecretStore
# metadata:
#   name: aws-secrets-manager
# spec:
#   provider:
#     aws:
#       service: SecretsManager
#       region: ap-northeast-2
#       auth:
#         jwt:
#           serviceAccountRef:
#             name: external-secrets-operator
# ---
# # ClusterSecretStore 예시 (GCP Secret Manager)
# apiVersion: external-secrets.io/v1beta1
# kind: ClusterSecretStore
# metadata:
#   name: gcp-secret-manager
# spec:
#   provider:
#     gcpsm:
#       projectId: univprepai
#       auth:
#         workloadIdentity:
#           clusterLocation: asia-northeast3
#           clusterName: seedtest-cluster
#           serviceAccountRef:
#             name: external-secrets-operator
# ---

# 참고: External Secrets Operator는 외부 시크릿 관리 시스템( AWS Secrets Manager, 
# GCP Secret Manager, HashiCorp Vault 등)에서 Kubernetes Secret을 자동으로 동기화합니다.
#
# 장점:
# - 중앙 집중식 시크릿 관리
# - 자동 갱신 (refreshInterval)
# - 감사 로그 및 버전 관리
# - RBAC 통합
#
# 설정 방법:
# 1. External Secrets Operator 설치
# 2. ClusterSecretStore 생성 (외부 시스템 연결)
# 3. ExternalSecret 생성 (Secret 생성 규칙)
# 4. 기존 CronJob/Deployment에서 Secret 참조 (변경 불필요)

