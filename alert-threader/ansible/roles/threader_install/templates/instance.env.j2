# =============================
# Alert Threader Instance Environment
# Instance: {{ item.name }}
# Implementation: {{ item.impl }}
# =============================

# Port configuration
PORT={{ item.port | default( (item.impl == 'python') | ternary(threader_python_port, (item.impl == 'node') | ternary(threader_node_port, threader_go_port)) ) }}

# Host binding
HOST=0.0.0.0

# Log level
LOG_LEVEL={{ item.log_level | default('info') }}

# Instance-specific settings
INSTANCE_NAME={{ item.name }}
INSTANCE_TYPE={{ item.impl }}

# Additional environment variables
{% if item.extra_env is defined %}
{% for k, v in item.extra_env.items() %}
{{ k }}={{ v }}
{% endfor %}
{% endif %}

# Health check settings
HEALTH_CHECK_INTERVAL={{ item.health_check_interval | default(30) }}
MAX_CONCURRENT_ALERTS={{ item.max_concurrent_alerts | default(100) }}

# Monitoring settings
ENABLE_METRICS={{ item.enable_metrics | default(true) }}
METRICS_PORT={{ item.metrics_port | default( (item.port | int) + 1000 ) }}
