{{ define "slack.title" }}[{{ .CommonLabels.severity | toUpper }}] {{ .CommonAnnotations.summary }}{{ end }}

{{ define "slack.color" }}
  {{- if eq .CommonLabels.severity "critical" -}}#E01E5A{{- else if eq .CommonLabels.severity "warning" -}}#ECB22E{{- else -}}#2EB67D{{- end -}}
{{ end }}

{{ define "slack.text" }}
*ğŸŒ Environment*: {{ getenv "ENVIRONMENT" | default "staging" }}
*ğŸš¨ Alert*: {{ .CommonAnnotations.summary }}
*âš¡ Severity*: `{{ .CommonLabels.severity }}`
*â° StartsAt*: {{ .StartsAt.Format "2006-01-02 15:04:05" }}
*ğŸ“ Description*: {{ .CommonAnnotations.description | default "(no description)" }}

*ğŸ·ï¸ Labels*: {{ range $k, $v := .CommonLabels }}`{{$k}}={{$v}}` {{ end }}
{{ end }}

{{ define "slack.fields" }}
[
  {"title": "ğŸš¨ Alert",     "value": "{{ .CommonAnnotations.summary }}", "short": false},
  {"title": "âš¡ Severity",  "value": "{{ .CommonLabels.severity }}",     "short": true},
  {"title": "ğŸŒ Environment","value": "{{ getenv "ENVIRONMENT" | default "staging" }}", "short": true},
  {"title": "ğŸ• Time",      "value": "{{ .StartsAt.Format "15:04:05" }}", "short": true}
]
{{ end }}

{{ define "slack.critical.text" }}
ğŸš¨ *CRITICAL ALERT* ğŸš¨

*ğŸŒ Environment*: {{ getenv "ENVIRONMENT" | default "staging" }}
*ğŸš¨ Alert*: {{ .CommonAnnotations.summary }}
*â° Time*: {{ .StartsAt.Format "2006-01-02 15:04:05" }}
*ğŸ“ Description*: {{ .CommonAnnotations.description | default "(no description)" }}

*ğŸ·ï¸ Labels*: {{ range $k, $v := .CommonLabels }}`{{$k}}={{$v}}` {{ end }}

*âš¡ IMMEDIATE ACTION REQUIRED* âš¡
{{ end }}

{{ define "slack.warning.text" }}
âš ï¸ *WARNING ALERT* âš ï¸

*ğŸŒ Environment*: {{ getenv "ENVIRONMENT" | default "staging" }}
*âš ï¸ Alert*: {{ .CommonAnnotations.summary }}
*â° Time*: {{ .StartsAt.Format "2006-01-02 15:04:05" }}
*ğŸ“ Description*: {{ .CommonAnnotations.description | default "(no description)" }}

*ğŸ·ï¸ Labels*: {{ range $k, $v := .CommonLabels }}`{{$k}}={{$v}}` {{ end }}

*ğŸ“‹ Please investigate when convenient* ğŸ“‹
{{ end }}

{{ define "slack.info.text" }}
â„¹ï¸ *INFO ALERT* â„¹ï¸

*ğŸŒ Environment*: {{ getenv "ENVIRONMENT" | default "staging" }}
*â„¹ï¸ Alert*: {{ .CommonAnnotations.summary }}
*â° Time*: {{ .StartsAt.Format "2006-01-02 15:04:05" }}
*ğŸ“ Description*: {{ .CommonAnnotations.description | default "(no description)" }}

*ğŸ·ï¸ Labels*: {{ range $k, $v := .CommonLabels }}`{{$k}}={{$v}}` {{ end }}

*ğŸ“Š For your information* ğŸ“Š
{{ end }}

{{ define "slack.resolved.text" }}
âœ… *ALERT RESOLVED* âœ…

*ğŸŒ Environment*: {{ getenv "ENVIRONMENT" | default "staging" }}
*âœ… Alert*: {{ .CommonAnnotations.summary }}
*â° Resolved*: {{ .EndsAt.Format "2006-01-02 15:04:05" }}
*â±ï¸ Duration*: {{ .EndsAt.Sub .StartsAt }}

*ğŸ·ï¸ Labels*: {{ range $k, $v := .CommonLabels }}`{{$k}}={{$v}}` {{ end }}
{{ end }}

